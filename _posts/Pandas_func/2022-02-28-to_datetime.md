---
title : "🌵Pandas 4. pd.to_datetime()"

categories:
    - Pandas_func
tags:
    - [Pandas, DataFrame, Data, datetime]

toc : true
toc_sticky : true

date: 2022-02-28
last_modified_at: 2022-02-28
---

* * *

🌵 처음 시작한 블로그에 너무 신이 나서 그런지 한달 전쯤 그만 허리디스크가 생겼다🤢. 그래서 '꾸준히' 라는 나만의 목표에 아쉬움이 생겼지만, 그래도 그 공백기 동안 내가 하고 싶은 것은 무엇인지, 지금 다니는 학교에서 어떤 것을 배우고 공부해야 할지 이것저것 생각해 본 것 같다. 이렇게 한번 아프면서 좋은 자세도 가지고, 좋은 휴식기도 가지는 게 나쁜 것만은 아닌 거 같다고 생각한다.  

🌵 이제 이틀 뒤면 개강이다. 군입대 후 2년만의 개강이라 기대 반 두려움 반이지만, 내가 하고 싶은 데이터 관련 분야를 정해놓은 상태라서 기대 쪽이 조금 더 큰 것 같다ㅎㅎ 학기 중에는 12월처럼 많은 내용을 올리기에는 시간이 빠듯할 것 같지만 (그 유명한 사망년이다...) 학교 공부와 그동안 했던 공부를 올리면서 복습하는 시간을 가질 생각이다😉. 일주일에 세개 이상은 포스팅 하는 게 이번학기 나의 목표닷!!  
* * *

🌵 이번 포스팅에서는 시계열 분석에서 기초적으로 반드시 알아야할 시간 관련 함수 <b>pd.to_datetime( )</b> 에 대해서 알아보자.  

🌵 처리 기준은 <b>year - month - day</b> 의 형태이다.
* * *  
  
## 1. pd.to_datetime( ) 기본 모양

🌵 <b>pd.to_datetime(series, format, errors)</b>
1. 처음 들어가는 인수인 series 는 데이터 처리 과정에서 datetime 형태로 바꾸려고 하는 열을 선언한다.
2. 두번째 인수 format은 datetime의 원하는 모양을 지정해준다.  
    - %y : 년도 (2자리) - 99, 00, 01 ...
    - %Y : 년도 (4자리) - 1999, 2000 ...
    - %m : 월 - 05, 08 ...
    - %d : 날짜 (2자리) - 07, 15, 21 ...
    - %H : 시간 (24시간) - 15, 18, 23 ...
    - %I : 시간 (12시간) - 3, 6, 11 ...
    - %M : 분 (2자리) - 23, 56 ...
    - %S : 초 (2자리) - 36, 59 ...  

    - %a : 요일 (짧은 이름) - Mon, Tue, Wed ...
    - %A : 요일 (긴 이름) - Monday, Tuesday, Wendsday ...
    - %w : 요일 (숫자 / 0이 일요일, 1이 월요일) - 0, 1, 2 ...  

    - %b : 월 (짧은 이름) - Jan, Feb ...
    - %B : 월 (긴 이름) - January, Febrary ...  
3. 마지막 인수 errors 는 오류를 불러일으킬지 결정하는 인수인데, 보통 errors = 'raise' 의 형태로 불러일으키는 경우가 많다.   
* * *

## 2. month.day 형태의 데이터가 있는 경우

🌵 예를 들어 month 와 day가 <b>⚪.⚪</b> 의 형태로 되어있다고 가정하자. 즉 아래와 같은 형태의 데이터프레임이 있는 것이다.
```
>>
m.d     col1    col2

2.26      A       1
2.27      B       3
3.05      A       2
```  


이런 경우에는 <b>df [ m.d ] . str . replace ( "." , "-" )</b> 형태로 지정해서 month-day 같은 꼴로 만들어준다.  
그 뒤에 <b>pd . to_datetime ( '2022-" + df [ m.d ] , errors )</b> 를 선언해주자.  

그러면 우리가 원하는 2022-02-26 같은 datetime column 이 생길 것이다.  

🌵 전체 코드는 다음과 같다.  
```py
df[m.d] = df[m.d].str.replace(".", "-")
df['date'] = df.to_datetime("2022-" + df[m.d], errors = 'raise')
df
```
```
>>
m.d     col1    col2       date

2.26      A       1     2022-02-26
2.27      B       3     2022-02-27
3.05      A       2     2022-03-05
```
* * *

## 3. year, month, day 가 모두 각각의 column인 경우

🌵 아래와 같은 데이터를 가정해보자.  

```
>>
year    month   day

2022    02      26
2022    02      27
2022    03      05
```

가장 먼저 할 일은 각 열의 데이터들이 str 자료형인지 확인하는 것이다.  

민약 디른 지료형이면 <b>df . astype ( 'str' )</b> 을 사용해서 각 데이터들을 str 형태로 바꿔주자.  

그 다음에는 <b>pd . to _ datetime (df [ 'year' ] + '-' + df [ 'month' ] + '-' + df [ 'day' ], errors = 'raise' )</b> 를 선언해주면 된다.  

🌵 전체 코드는 아래와 같다.

```py
df = df.astpe('str)
df['date] = df.to_datetime(df['year'] + '-' + df['month'] + '-' + df['day'], errors = 'raise')
df
```
```
>>
year    month   day     date

2022    02      26      2022-02-26
2022    02      27      2022-02-27
2022    03      05      2022-03-05
```
* * *
🌵 가장 중요한 점은 합칠 데이터의 형태가 반드시 str 형태여야 한다는 점이다. 대부분의 시계열 데이터들은 int 자료형일 가능성이 높기 때문에 <a>. info( )</a> 함수 등을 사용해서 미리 변경하는 것이 좋을 것 같다. 이렇게 변경한 데이터프레임의 다른 데이터들은 당연히 원상복구 해주는 편이 좋다👍. 뒤에 있을 남은 전처리 과정을 꼭 생각해주자!!
